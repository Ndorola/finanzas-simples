<%- include('./partials/head.ejs') %>
<% let totalIngresos = ingresos ? ingresos.reduce((sum, value) => ( sum + value.monto ), 0) : 0 %>
<% let totalGastos = gastos ? gastos.reduce((sum, value) => ( sum + value.monto ), 0) : 0 %>
<% let balance = totalIngresos - totalGastos %>

<body class="bodyFinanzas">
    <header>
        <div class="cajaLogo">
            <img class="logo" src="/assets/fslogoblanco.png" alt="logoFS"/>
            <p>Hola <%= nombre %> !</p>
        </div>
        <nav>
            <a class="cerrarSesion" href="/cerrarsesion">Cerrar sesion</a>
        </nav>
    </header>
    <main>
        <div id="panel">
            <div class="panelTitle">
                <h3 class="titleh3">Mi balance mensual</h3>
                <a class="nuevomes" href="/nuevomes"><img class="reiniciar" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZlcnNpb249IjEuMSIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHhtbG5zOnN2Z2pzPSJodHRwOi8vc3ZnanMuY29tL3N2Z2pzIiB3aWR0aD0iNTEyIiBoZWlnaHQ9IjUxMiIgeD0iMCIgeT0iMCIgdmlld0JveD0iMCAwIDQ5NyA0OTciIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDUxMiA1MTIiIHhtbDpzcGFjZT0icHJlc2VydmUiIGNsYXNzPSIiPjxnPjxnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGVsbGlwc2UgY3g9IjI0NS4zMTEiIGN5PSIyNDguODIxIiBmaWxsPSIjZmZmM2JiIiByeD0iMjE0Ljk2OSIgcnk9IjIxNC45NjkiIHRyYW5zZm9ybT0ibWF0cml4KC43MDcgLS43MDcgLjcwNyAuNzA3IC0xMDQuMDkzIDI0Ni4zMzkpIiBkYXRhLW9yaWdpbmFsPSIjYzlmNmIwIiBzdHlsZT0iIiBjbGFzcz0iIj48L2VsbGlwc2U+PHBhdGggZD0ibTM0OC4xMSA1OS45ODJjNDkuMTM1IDM5LjM5NyA4MC42MDYgOTkuOTE3IDgwLjYwNiAxNjcuNzk2IDAgMTE4LjcyNC05Ni4yNDUgMjE0Ljk2OS0yMTQuOTY5IDIxNC45NjktMzcuMjM3IDAtNzIuMjYtOS40NzEtMTAyLjc5OC0yNi4xMzEgMzYuODA1IDI5LjUxIDgzLjUxOCA0Ny4xNzQgMTM0LjM2MyA0Ny4xNzQgMTE4LjcyNSAwIDIxNC45NjktOTYuMjQ1IDIxNC45NjktMjE0Ljk2OSAwLTgxLjQ4OC00NS4zNDItMTUyLjM4Mi0xMTIuMTcxLTE4OC44Mzl6IiBmaWxsPSIjZmZlYTg3IiBkYXRhLW9yaWdpbmFsPSIjOWJlNjlkIiBzdHlsZT0iIiBjbGFzcz0iIj48L3BhdGg+PHBhdGggZD0ibTQ3NS4zMzggMjg3LjY0OWMxMS4yOTQgMCAyMC43MDEtOC43OTYgMjEuMzA2LTIwLjA3NC4yMzYtNC4zODUuMzU1LTguNzc4LjM1NS0xMy4xNzYgMC02Ny4zODItMjYuMjQtMTMwLjczMS03My44ODYtMTc4LjM3Ny00Ny42NDYtNDcuNjQ2LTExMC45OTQtNzMuODg2LTE3OC4zNzYtNzMuODg2LTYyLjk4MSAwLTEyMi43NTYgMjMuMjY3LTE2OC43OTYgNjQuNzk1di0xNS45NDljMC02Ljg0OC01LjU1MS0xMi40LTEyLjQtMTIuNGgtMTkuNTdjLTYuODQ4IDAtMTIuNCA1LjU1Mi0xMi40IDEyLjR2NzAuNDI1YzAgMTEuNDM1IDkuMjcgMjAuNzA1IDIwLjcwNSAyMC43MDVoNzAuNDI1YzYuODQ4IDAgMTIuNC01LjU1MiAxMi40LTEyLjR2LTE5LjU3MWMwLTYuODQ4LTUuNTUxLTEyLjQtMTIuNC0xMi40aC0xNy4xNzhjMzguMTE1LTMzLjkzIDg3LjM1Ni01Mi45MjEgMTM5LjIxMy01Mi45MjEgMTE1LjU2MSAwIDIwOS41NzggOTQuMDE2IDIwOS41NzggMjA5LjU3OSAwIDMuNjUyLS4wOTkgNy4zMDItLjI5MyAxMC45NDMtLjY0NyAxMi4xNDkgOS4xNTIgMjIuMzA3IDIxLjMxNyAyMi4zMDd6IiBmaWxsPSIjZmZkZjRiIiBkYXRhLW9yaWdpbmFsPSIjOTllNmZjIiBzdHlsZT0iIiBjbGFzcz0iIj48L3BhdGg+PHBhdGggZD0ibTIxLjY2MiAyMDkuMzUxYy0xMS4yOTQgMC0yMC43MDEgOC43OTYtMjEuMzA2IDIwLjA3NC0uMjM2IDQuMzg0LS4zNTYgOC43NzctLjM1NiAxMy4xNzUgMCA2Ny4zODIgMjYuMjQgMTMwLjczMSA3My44ODYgMTc4LjM3NyA0Ny42NDYgNDcuNjQ3IDExMC45OTUgNzMuODg2IDE3OC4zNzYgNzMuODg2IDYyLjk4MSAwIDEyMi43NTYtMjMuMjY3IDE2OC43OTYtNjQuNzk1djE1Ljk0OWMwIDYuODQ4IDUuNTUxIDEyLjQgMTIuNCAxMi40aDE5LjU3YzYuODQ4IDAgMTIuNC01LjU1MiAxMi40LTEyLjR2LTcwLjQyNWMwLTExLjQzNS05LjI3LTIwLjcwNS0yMC43MDUtMjAuNzA1aC03MC40MjVjLTYuODQ4IDAtMTIuNCA1LjU1Mi0xMi40IDEyLjR2MTkuNTdjMCA2Ljg0OCA1LjU1MSAxMi40IDEyLjQgMTIuNGgxNy4xNzhjLTM4LjExNSAzMy45My04Ny4zNTcgNTIuOTIxLTEzOS4yMTMgNTIuOTIxLTExNS41NjEgMC0yMDkuNTc4LTk0LjAxNi0yMDkuNTc4LTIwOS41NzkgMC0zLjY1My4wOTktNy4zMDIuMjkzLTEwLjk0My42NDgtMTIuMTQ3LTkuMTUxLTIyLjMwNS0yMS4zMTYtMjIuMzA1eiIgZmlsbD0iI2ZmZGY0YiIgZGF0YS1vcmlnaW5hbD0iIzk5ZTZmYyIgc3R5bGU9IiIgY2xhc3M9IiI+PC9wYXRoPjxnIGZpbGw9IiNmYWY3ZjciPjxwYXRoIGQ9Im0xOTQuODg5IDIyMy40MzZjNC4xNDMgMCA3LjUtMy4zNTggNy41LTcuNXMtMy4zNTctNy41LTcuNS03LjVoLTI2LjEyYy00LjE0MyAwLTcuNSAzLjM1OC03LjUgNy41djYxLjk4OWMwIDQuMTQyIDMuMzU3IDcuNSA3LjUgNy41aDI2LjEyYzQuMTQzIDAgNy41LTMuMzU4IDcuNS03LjVzLTMuMzU3LTcuNS03LjUtNy41aC0xOC42MnYtMTUuOTk1aDE2LjY5NGM0LjE0MyAwIDcuNS0zLjM1OCA3LjUtNy41cy0zLjM1Ny03LjUtNy41LTcuNWgtMTYuNjk0di0xNS45OTVoMTguNjJ6IiBmaWxsPSIjZTVjMjIyIiBkYXRhLW9yaWdpbmFsPSIjZmFmN2Y3IiBzdHlsZT0iIiBjbGFzcz0iIj48L3BhdGg+PHBhdGggZD0ibTMyNy45MDUgMjIzLjQzNmM0LjE0MyAwIDcuNS0zLjM1OCA3LjUtNy41cy0zLjM1Ny03LjUtNy41LTcuNWgtMjYuMTE5Yy00LjE0MiAwLTcuNSAzLjM1OC03LjUgNy41djYxLjk4OWMwIDQuMTQyIDMuMzU4IDcuNSA3LjUgNy41aDI2LjExOWM0LjE0MyAwIDcuNS0zLjM1OCA3LjUtNy41cy0zLjM1Ny03LjUtNy41LTcuNWgtMTguNjE5di0xNS45OTVoMTYuNjkzYzQuMTQzIDAgNy41LTMuMzU4IDcuNS03LjVzLTMuMzU3LTcuNS03LjUtNy41aC0xNi42OTN2LTE1Ljk5NWgxOC42MTl6IiBmaWxsPSIjZTVjMjIyIiBkYXRhLW9yaWdpbmFsPSIjZmFmN2Y3IiBzdHlsZT0iIiBjbGFzcz0iIj48L3BhdGg+PHBhdGggZD0ibTI1Ny44MjggMjQxLjQ0MmMtNy43MzgtMi44NTQtMTQuOTM4LTUuOTY0LTE3LjA5Mi02LjkwNy0xLjg2NC0xLjQ3LTEuODAzLTMuNTM1LTEuNjgtNC4zOTIuMTY3LTEuMTY1IDEuMDA5LTQuMDExIDUuMi01LjI3NCA4Ljk4My0yLjcwOCAxNy4yNzUgMy44NSAxNy41MTEgNC4wMzkgMy4xNjkgMi42MzIgNy44NzUgMi4yMTMgMTAuNTMtLjk0NSAyLjY2NS0zLjE3MSAyLjI1Ni03LjkwMi0uOTE1LTEwLjU2Ny0uNTg1LS40OTItMTQuNTI4LTExLjk4Ni0zMS40NTItNi44ODktOC41MTcgMi41NjYtMTQuNTQxIDkuMjczLTE1LjcyMyAxNy41MDUtMS4xMDcgNy43MTYgMi4yMzcgMTUuMTM4IDguNzI5IDE5LjM3LjMzMS4yMTYuNjc5LjQwNSAxLjA0LjU2Ni4zNjEuMTYyIDguOTY4IDMuOTkyIDE4LjY2IDcuNTY3IDIuODE4IDEuMDQgOS4yNzkgMy45ODUgOC40MDYgOC44NzQtLjY0NyAzLjYyNi01LjAzIDcuMzc3LTExLjI0MyA3LjM3Ny02LjMwNyAwLTEyLjM3OS0yLjU0Ni0xNi4yNDMtNi44MS0yLjc4Mi0zLjA3MS03LjUyNi0zLjMwMS0xMC41OTQtLjUyMS0zLjA2OSAyLjc4Mi0zLjMwMyA3LjUyNC0uNTIxIDEwLjU5NCA2LjY2IDcuMzUgMTYuODg4IDExLjczNyAyNy4zNTggMTEuNzM3IDEzLjAyOCAwIDIzLjk2OC04LjMwMiAyNi4wMS0xOS43NCAxLjUzNS04LjU5NS0yLjM4Mi0xOS44My0xNy45ODEtMjUuNTg0eiIgZmlsbD0iI2U1YzIyMiIgZGF0YS1vcmlnaW5hbD0iI2ZhZjdmNyIgc3R5bGU9IiIgY2xhc3M9IiI+PC9wYXRoPjxwYXRoIGQ9Im0zOTcuMDAyIDIwOS4yMDZoLTM0LjU0OWMtNC4xNDIgMC03LjUgMy4zNTgtNy41IDcuNXMzLjM1OCA3LjUgNy41IDcuNWg5LjcwNXY1NS4wNmMwIDQuMTQyIDMuMzU3IDcuNSA3LjUgNy41czcuNS0zLjM1OCA3LjUtNy41di01NS4wNmg5Ljg0NGM0LjE0MiAwIDcuNS0zLjM1OCA3LjUtNy41cy0zLjM1OC03LjUtNy41LTcuNXoiIGZpbGw9IiNlNWMyMjIiIGRhdGEtb3JpZ2luYWw9IiNmYWY3ZjciIHN0eWxlPSIiIGNsYXNzPSIiPjwvcGF0aD48cGF0aCBkPSJtMTM4LjQ1OSAyMzIuOTY1YzAtMTMuMS0xMS4wNzEtMjMuNzU5LTI0LjY3OS0yMy43NTloLTE2LjYyNWMtLjAwMyAwLS4wMDcgMC0uMDEgMHMtLjAwNyAwLS4wMSAwYy00LjE0MyAwLTcuNSAzLjM1OC03LjUgNy41djYyLjU2YzAgNC4xNDIgMy4zNTcgNy41IDcuNSA3LjVzNy41LTMuMzU4IDcuNS03LjV2LTE4LjU1NmwyMC42OTMgMjMuNTEyYzEuNDgyIDEuNjg1IDMuNTUzIDIuNTQ1IDUuNjMzIDIuNTQ1IDEuNzYgMCAzLjUyNy0uNjE2IDQuOTUyLTEuODcgMy4xMDktMi43MzYgMy40MTEtNy40NzYuNjc1LTEwLjU4NWwtMTYuMjM4LTE4LjQ0OWMxMC40MjgtMi43NzggMTguMTA5LTExLjk4OCAxOC4xMDktMjIuODk4em0tMjQuNjc5IDguNzU5Yy0yLjEwOCAwLTUuNzMxLjAxNS05LjA1Mi4wMzEtLjAxNy0zLjI0Mi0uMDQtMTQuMTUxLS4wNS0xNy41NDhoOS4xMDJjNS4yNDYgMCA5LjY3OSA0LjAxMSA5LjY3OSA4Ljc1OSAwIDQuNzQ2LTQuNDMzIDguNzU4LTkuNjc5IDguNzU4eiIgZmlsbD0iI2U1YzIyMiIgZGF0YS1vcmlnaW5hbD0iI2ZhZjdmNyIgc3R5bGU9IiIgY2xhc3M9IiI+PC9wYXRoPjwvZz48L2c+PC9nPjwvc3ZnPg==" /></a>
            </div>
            <div class="<%= balance >= 0 ? 'balance ' : 'enRojo'%>">
                <h1 class="balanceH1">$ <%= balance %> .-</h1>
            </div>
            <div class="contenedorMov">
                <div class="movimientosBox">
                    <a class="ingresos" href="/ingresos">Registrar ingresos</a>
                    <p class="total">$ <%= totalIngresos %> .-</p>
                </div>
                <div class="movimientosBox">
                    <a class="gastos" href="/gastos">Registrar gastos</a>
                    <p class="total">$ <%= totalGastos %> .-</p>
                </div>
            </div>
        </div>  
    </main>
    <%- include('./partials/footer.ejs') %>
</body>
</html>
